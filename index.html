<!DOCTYPE html>
<html lang="en">

<head>
    <title>Augment Echo</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt"
        crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="styles/styles.css">
    <link rel="shortcut icon" href="assets/images/Emblem.png" />
</head>

<body>
    <div class="home-content" id="page-container">
        <div id="content-wrap">
            <nav class="navbar navbar-inverse">
                <div class="container-fluid">
                    <div class="navbar-header">
                        <a class="navbar-brand" href="index.html"><img src="assets/images/AugmentEcho_nameLabel.png"></a>
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                    </div>
                    <div class="collapse navbar-collapse" id="myNavbar">
                        <ul class="nav navbar-nav navbar-right">
                            <li class="active"><a href="index.html">Home</a></li>
                            <li><a href="news.html">News</a></li>
                            <li><a href="sites.html">Sites</a></li>
                            <li><a href="videos.html">Videos</a></li>
                            <!--<li><a href="creative.html">Creative</a></li>-->
                            <!--<li><a href="shop.html">Item Shop</a></li>-->
                            <!--<li><a href="communities.html">Communities</a></li>-->
                            <!--<li><a href="stats.html">Stats</a></li>-->
                            <li><a href="settings.html">Settings</a></li>
                            <li><a href="gear.html">Gear</a></li>
                            <!--<li><a href="about.html">About</a></li>-->
                            <li><a href="https://streamlabs.com/AugmentEcho" target="_blank">Donate</a></li>
                        </ul>
                    </div>
                </div>
            </nav>

            <div id="myCarousel" class="carousel slide" data-ride="carousel">
                <!-- Start Slider -->
                <ol class="carousel-indicators">
                    <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                    <li data-target="#myCarousel" data-slide-to="1"></li>
                    <li data-target="#myCarousel" data-slide-to="2"></li>
                    <li data-target="#myCarousel" data-slide-to="3"></li>
                    <li data-target="#myCarousel" data-slide-to="4"></li>
                    <li data-target="#myCarousel" data-slide-to="5"></li>
                    <li data-target="#myCarousel" data-slide-to="6"></li>
                    <li data-target="#myCarousel" data-slide-to="7"></li>
                    <li data-target="#myCarousel" data-slide-to="8"></li>
                </ol>
                <div class="carousel-inner" role="listbox">
                    <div class="item active">
                        <div class="video-container">
                            <div id="twitch-clip-embed"></div>
                        </div>
                    </div>
                    <div class="item">
                        <a href="https://twitch.tv/AugmentEcho" target="_blank">
                            <img src="assets/images/Octane_Twitch.png">
                        </a>
                    </div> <!-- End Active -->
                    <div class="item">
                        <a href="https://youtube.com/AugmentEcho" target="_blank">
                            <img src="assets/images/Mirage_YouTube.png">
                        </a>
                    </div>
                    <div class="item">
                        <a href="https://www.twitter.com/AugmentEcho" target="_blank">
                            <img src="assets/images/Pathfinder_Twitter.png">
                        </a>
                    </div>
                    <div class="item">
                        <a href="https://www.mixer.com/AugmentEcho" target="_blank">
                            <img src="assets/images/Wraith_Mixer.png">
                        </a>
                    </div>            
                    <div class="item">
                        <a href="https://twitch.tv/augmentecho/clips?show_desktop_mode=true" target="_blank">
                            <img src="assets/images/Bangalore_Twitch.png">
                        </a>
                    </div>
                    <div class="item">
                        <a href="https://reddit.com/r/ApexLegends/top/?t=day" target="_blank">
                            <img src="assets/images/Caustic_Reddit.png">
                        </a>
                    </div>
                    <div class="item">
                        <a href="https://discord.gg/vbWyfMX" target="_blank">
                            <img src="assets/images/Wattson_Discord.png">
                        </a>
                    </div>
                    <div class="item">
                        <a href="https://streamlabs.com/AugmentEcho" target="_blank">
                            <img src="assets/images/Lifeline_Augment.png">
                        </a>
                    </div>
                </div>
                <!-- Start Slider Controls -->
                <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
                    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
                    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a> <!-- End Slider Controls -->
            </div> <!-- End Slider -->
        </div>

        <footer class="container-fluid text-center" id="footer" style="border-top: none;">
            <div class="row">
                <div class="col-lg-4 col-sm-12">
                    <h3>Contact</h3>
                    <h4>Email:&nbsp;<a href="mailto:augmentecho@gmail.com">AugmentEcho@gmail.com</a></h4>
                    <h4>Twitter:&nbsp;<a href="https://twitter.com/augmentecho">@AugmentEcho</a></h4>
                </div>
                <div class="col-lg-4 col-sm-12">
                    <h3>Connect</h3> <!-- Font Awesome -->
                    <a href="https://www.twitter.com/AugmentEcho" target="_blank" i class="fab fa-twitter"></a>
                    <a href="https://www.youtube.com/AugmentEcho" target="_blank" i class="fab fa-youtube"></a>
                    <a href="https://www.twitch.tv/AugmentEcho" target="_blank" i class="fab fa-twitch"></a>
                    <a href="https://discord.gg/vbWyfMX" target="_blank" i class="fab fa-discord"></a>
                    <a href="https://account.xbox.com/en-US/Profile?gamerTag=Augment_Echo" target="_blank" i class="fab fa-xbox"></a>
                    <a href="https://www.reddit.com/u/AugmentEcho" target="_blank" i class="fab fa-reddit-alien"></a>
                </div>
                <div class="col-lg-4 col-sm-12">
                    <br>
                    <img src="assets/images/Emblem.png" class="icon">
                </div>
            </div>
        </footer>
    </div>

    <script>
        // Load Google's JavaScript asynchronously (needs improvement, use events)
        const tag = document.createElement("script");
        tag.src = "https://www.youtube.com/iframe_api";
        const firstScriptTag = document.getElementsByTagName("script")[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        // Initialize the carousel
        const carousel = $("#myCarousel");
        carousel.carousel({
            pause: null // Don't pause the carousel on hover
        });

        const carouselControls = $("#myCarousel > .carousel-control");

        let player;
        let timeout;

        // Handle when moving away from the video player
        carousel.on("slide.bs.carousel", (event) => {
            if (!event.relatedTarget.querySelector("#twitch-clip-embed"))
                player.pauseVideo();
        });

        // Handle when moving towards the player
        carousel.on("slid.bs.carousel", (event) => {
            if (event.relatedTarget.querySelector("#twitch-clip-embed"))
                player.playVideo();
        });

        // This is called when Google's code is ready
        function onYouTubeIframeAPIReady() {
            YT.PlayerState.UNSTARTED = -1; // Why does Google not provide this?

            // Initialize the YT player
            player = new YT.Player("twitch-clip-embed", {
                width: 1280,
                height: 720,
                events: {
                    onReady: (event) => { // The embedded player is ready to load a video
                        event.target.cuePlaylist({
                            list: "PLQPb3bQsjrt4224S1558-xfumuj4PFcK_" // Weekly clips playlist
                        });
                    },
                    onStateChange: (event) => {
                        // console.log(["unstarted", "ended", "playing", "paused", "buffering", undefined, "cued"][event.data + 1]);
                        switch (event.data) {
                            case YT.PlayerState.UNSTARTED:
                                clearTimeout(timeout);
                                event.target.playVideo(); // Autoplay
                                break;
                            case YT.PlayerState.PLAYING:
                                clearTimeout(timeout);
                                carousel.carousel(0);
                                carousel.carousel("pause");
                                carouselControls[0].style.display = "none"; // Hide controls
                                carouselControls[1].style.display = "none";
                                break;
                            case YT.PlayerState.PAUSED:
                                clearTimeout(timeout);
                                carouselControls[0].style.display = "inline-block"; // Show controls
                                carouselControls[1].style.display = "inline-block";
                                timeout = setTimeout(() => {
                                    carousel.carousel("next");
                                    carousel.carousel("cycle");
                                }, 1000);
                                break;
                            case YT.PlayerState.ENDED:
                                clearTimeout(timeout);
                                event.target.seekTo(0); // Back to video start
                                event.target.pauseVideo(); // Trigger pause event
                                break;
                            case YT.PlayerState.BUFFERING:
                                clearTimeout(timeout);
                                carouselControls[0].style.display = "inline-block"; // Show controls
                                carouselControls[1].style.display = "inline-block";
                                break; // Future: make the carousel cycle while buffering
                        }
                    }
                }
            });
        }
    </script>
</body>

</html>
